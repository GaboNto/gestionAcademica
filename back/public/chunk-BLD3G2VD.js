import{a as E,b as P}from"./chunk-Z6OXCQYR.js";import{a as I}from"./chunk-TIPYTT3C.js";import"./chunk-S4HLWTSG.js";import{b as Y,c as Z}from"./chunk-FQ4AMJOQ.js";import{a as V,b as H,d as J,g as K,h as Q,l as W,m as X}from"./chunk-R6VRVSGD.js";import{g as F,i as d,k as O,l as k,o as L,p as B,r as N,t as T,v as D}from"./chunk-LNO3YFUH.js";import{b as C,d as y,e as S,i as w}from"./chunk-MPN7ZU5M.js";import{a as j,h as z}from"./chunk-E3JY4AQ7.js";import{Bb as r,Da as o,Db as f,Oa as v,Ta as g,_ as p,_a as a,ib as e,jb as i,kb as s,kc as _,oc as M,qb as c,rd as G,sd as q,ud as A,vd as R,wd as U}from"./chunk-JHWQBVSM.js";import"./chunk-TSRGIXR5.js";function ee(n,l){n&1&&(e(0,"mat-error"),r(1," El correo es obligatorio "),i())}function te(n,l){n&1&&(e(0,"mat-error"),r(1," Ingresa un correo v\xE1lido "),i())}function ie(n,l){n&1&&(e(0,"mat-error"),r(1," La contrase\xF1a es obligatoria "),i())}function re(n,l){n&1&&(e(0,"mat-error"),r(1," La contrase\xF1a debe tener al menos 4 caracteres "),i())}var $=class n{fb=p(T);auth=p(I);router=p(y);route=p(C);snackBar=p(Y);hidePassword=!0;loading=!1;form=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(4)]]});ngOnInit(){this.auth.isLoggedIn()&&this.router.navigateByUrl("/dashboard")}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0;let{email:l,password:m}=this.form.value;this.auth.login(l,m).subscribe({next:()=>{this.loading=!1,localStorage.setItem("lastLogin",new Date().toISOString());let t=this.route.snapshot.queryParamMap.get("returnUrl")||"/dashboard";this.router.navigateByUrl(t)},error:t=>{this.loading=!1,this.snackBar.open(t?.error?.message||"Credenciales incorrectas","Cerrar",{duration:4e3,panelClass:"error-snackbar"})}})}static \u0275fac=function(m){return new(m||n)};static \u0275cmp=v({type:n,selectors:[["app-login"]],decls:36,vars:9,consts:[[1,"login-wrapper"],[1,"login-background"],[1,"login-card"],[1,"login-header"],[1,"login-icon"],[1,"title"],[1,"subtitle"],[1,"login-divider"],["novalidate","",1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","email","type","email"],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"full-width","login-btn",3,"disabled"],[1,"login-footer"],["mat-button","","type","button","routerLink","/recuperar-clave",1,"full-width","forgot-btn"],[1,"help-text"]],template:function(m,t){if(m&1&&(e(0,"div",0),s(1,"div",1),e(2,"mat-card",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),r(6,"school"),i()(),e(7,"div")(8,"h1",5),r(9,"Ingresar al sistema"),i(),e(10,"p",6),r(11," Plataforma de gesti\xF3n de pr\xE1cticas pedag\xF3gicas. "),i()()(),s(12,"mat-divider",7),e(13,"form",8),c("ngSubmit",function(){return t.submit()}),e(14,"mat-form-field",9)(15,"mat-label"),r(16,"Correo institucional"),i(),s(17,"input",10),g(18,ee,2,0,"mat-error",11)(19,te,2,0,"mat-error",11),i(),e(20,"mat-form-field",9)(21,"mat-label"),r(22,"Contrase\xF1a"),i(),s(23,"input",12),e(24,"button",13),c("click",function(){return t.hidePassword=!t.hidePassword}),e(25,"mat-icon"),r(26),i()(),g(27,ie,2,0,"mat-error",11)(28,re,2,0,"mat-error",11),i(),e(29,"button",14),r(30),i()(),e(31,"div",15)(32,"button",16),r(33," \xBFOlvidaste tu contrase\xF1a? "),i(),e(34,"p",17),r(35," \xBFTienes problemas para ingresar? Contacta a este loco 997061651. "),i()()()()),m&2){let u,b,h,x;o(13),a("formGroup",t.form),o(5),a("ngIf",(u=t.form.get("email"))==null?null:u.hasError("required")),o(),a("ngIf",(b=t.form.get("email"))==null?null:b.hasError("email")),o(4),a("type",t.hidePassword?"password":"text"),o(3),f(" ",t.hidePassword?"visibility":"visibility_off"," "),o(),a("ngIf",(h=t.form.get("password"))==null?null:h.hasError("required")),o(),a("ngIf",(x=t.form.get("password"))==null?null:x.hasError("minlength")),o(),a("disabled",t.loading),o(),f(" ",t.loading?"Ingresando...":"Ingresar"," ")}},dependencies:[M,_,D,L,F,O,k,B,N,w,S,z,j,Q,K,V,H,J,X,W,U,R,A,q,G,Z,P,E],styles:[".login-wrapper[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;position:relative;overflow:hidden;background:radial-gradient(circle at top left,#e0f2fe,#eef2ff 40%,#f9fafb)}.login-background[_ngcontent-%COMP%]{position:absolute;inset:0;pointer-events:none;opacity:.5;background:radial-gradient(circle at 0% 0%,rgba(37,99,235,.15),transparent 55%),radial-gradient(circle at 100% 100%,rgba(79,70,229,.12),transparent 55%)}.login-card[_ngcontent-%COMP%]{position:relative;width:100%;max-width:430px;padding:24px 26px 20px;border-radius:18px;box-shadow:0 10px 25px #0f172a24,0 0 0 1px #94a3b840;background:#fffc;backdrop-filter:blur(10px)}.login-header[_ngcontent-%COMP%]{display:flex;gap:14px;align-items:center;margin-bottom:12px}.login-icon[_ngcontent-%COMP%]{width:46px;height:46px;border-radius:999px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#2563eb,#4f46e5);color:#fff;box-shadow:0 6px 15px #2563eb80}.title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:#0f172a}.subtitle[_ngcontent-%COMP%]{margin:2px 0 0;color:#6b7280;font-size:.9rem}.login-divider[_ngcontent-%COMP%]{margin:10px 0 14px}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.full-width[_ngcontent-%COMP%]{width:100%}.login-btn[_ngcontent-%COMP%]{margin-top:6px;height:44px;font-weight:600;border-radius:999px;text-transform:none;letter-spacing:.02em}.login-btn[disabled][_ngcontent-%COMP%]{opacity:.7}.login-footer[_ngcontent-%COMP%]{margin-top:10px;text-align:center}.help-text[_ngcontent-%COMP%]{margin:0;font-size:.78rem;color:#9ca3af}"]})};export{$ as LoginComponent};
